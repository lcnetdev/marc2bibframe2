# marc2bibframe2 release notes

## v1.7.1

Conversion updates based on specifications v1.7.1. See the Library of Congress' [BIBFRAME site](https://www.loc.gov/bibframe/) for more details. Specifications are included in this distribution in the [spec](spec/) directory. Changes of note:

* Deduping between 007 and 008, and other MARC fields.

* Convert MARC BibHubs to BF Hubs.

* Frequency notes changed to status resources. Use Note URIs not labels.

* Address issues #207 and #218.

See the [NEWS](NEWS) file and the [updated specifications](spec/) for full details of changes. Changes from v1.7 in the specifications are marked in red.

 
## v1.7.0

Conversion updates based on specifications v1.7. See the Library of Congress' [BIBFRAME site](https://www.loc.gov/bibframe/) for more details. Specifications are included in this distribution in the [spec](spec/) directory. Changes of note:

* Uniform titles in 130, 240, 6XX, and 8XX fields now generate stub "Hub" records rather than creating properties on the described Work or Instance.

* Major overhaul of punctuation handling, based on the [PCC Guidelines for Minimally Punctuated MARC Records](https://loc.gov/aba/pcc/documents/PCC-Guidelines-for-Minimally-Punctuated-MARC-Data-v.1.2.docx). See "Process 7" in the [Process0-7 doc](spec/ConvSpec-Process0-7-v1.7.docx).

* MARC 880 fields that are paired with 245, 250, 26X, and 490 fields are processed along with the standard MARC field, generating additional properties on the specified object with an xml:lang designation.

* Updates based on the BIBFRAME ontology v2.1.0.

See the [NEWS](NEWS) file and the [updated specifications](spec/) for full details of changes. Changes from v1.6 in the specifications are marked in red.

## v1.6.0

Conversion updates based on specifications v1.6. See the Library of Congress' [BIBFRAME site](https://www.loc.gov/bibframe/) for more details. Specifications are included in this distribution in the [spec](spec/) directory. Changes of note:

* Many duplicate properties generated by the LDR/fixed fields conversions, as well as data fields 336, 337, and 338, have been eliminated. In most cases only one of the applicable properties should be generated.

* More URIs have been added to the 007 and 006/008 conversions, which should result in the generation of fewer blank nodes.

* In many cases, an attempt is made to assign a URI to bf:Source and bf:assigner/bf:Agent nodes where appropriate.

* URIs have been added to the bf:source properties generated by MARC subject fields reflecting the subject thesaurus in use.

* There has been a major overhaul of processing for multiscript records (records with 880 fields). In particular:
    * xml:lang attributes can now be generated from ISO-15294 codes in the $6 as well as MARC-8 codes.
    * MARC 880 fields are now matched with their linked "regular" field using the occurrence number in the $6. This is done to allow either the vernacular or the Romanized field to be converted, based on the configuration in the [map880.xml](xsl/conf/map880.xml) configuration file. See the numeric subfields conversion specification for more details. The general strategy:
        * Unlinked fields (with occurrence "00" or no matching occurrence number) are always converted.
        * For identifier fields (010-099), the regular data field is preferred over the linked 880.
        * For authority-controlled fields, the regular data field is preferred over the linked 880, as vernacular versions of the strings should be available from the authority record.
        * For other fields, the 880 is preferred, with some exceptions.
        * The 245 represents a special case: _both_ the 245 and the linked 880 are converted, and the properties generated by both fields are assigned to the same subjects.

* Use of the `localfields` stylesheet parameter has expanded to accommodate more local processing specific to the Library of Congress. In particular:
    * `localfields` controls handling of bf:Item generation from the 050, 051, and other fields.
    * For fields with $5, `localfields` will only process fields if the value of $5 is "DLC".
    * `localfields` limits the processing of 856 and 859 fields to only a few matching URL patterns.
