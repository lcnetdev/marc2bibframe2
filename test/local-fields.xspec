<?xml version="1.0" encoding="UTF-8"?>
<x:description xmlns:x="http://www.jenitennison.com/xslt/xspec"
               xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
               xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
               xmlns:marc="http://www.loc.gov/MARC21/slim"
               xmlns:bf="http://id.loc.gov/ontologies/bibframe/"
               xmlns:bflc="http://id.loc.gov/ontologies/bflc/"
               xmlns:madsrdf="http://www.loc.gov/mads/rdf/v1#"
               stylesheet="../xsl/marc2bibframe2.xsl"
               xslt-version="1.0">

  <x:scenario label="suppressed">
    <x:context href="data/local-fields/993.xml"/>
    <x:expect label="should match expected">
      <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
        <bf:Work xmlns:bf="http://id.loc.gov/ontologies/bibframe/" rdf:about="http://example.org/d33e2#Work">
          <bf:adminMetadata>
            <bf:AdminMetadata>
              <bf:generationProcess>
                <bf:GenerationProcess>
                  <rdfs:label xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#">DLC marc2bibframe2 v1.7.0-SNAPSHOT</rdfs:label>
                  <bf:generationDate rdf:datatype="http://www.w3.org/2001/XMLSchema#dateTime">2021-07-16T14:11:41.585-04:00</bf:generationDate>
                </bf:GenerationProcess>
              </bf:generationProcess>
              <bf:status>
                <bf:Status>
                  <rdf:type rdf:resource="https://id.loc.gov/vocabulary/mstatus/supp"/>
                  <rdfs:label xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#">opac suppressed</rdfs:label>
                  <bflc:catalogerId xmlns:bflc="http://id.loc.gov/ontologies/bflc/">ntra</bflc:catalogerId>
                  <bf:qualifier>reason</bf:qualifier>
                  <bf:date>2021-07-15</bf:date>
                  <bf:note>
                    <bf:Note>
                      <rdfs:label xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#">further explication</rdfs:label>
                    </bf:Note>
                  </bf:note>
                </bf:Status>
              </bf:status>
              <bf:status>
                <bf:Status>
                  <rdf:type rdf:resource="https://id.loc.gov/vocabulary/mstatus/supp"/>
                  <rdfs:label xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#">opac suppressed</rdfs:label>
                </bf:Status>
              </bf:status>
            </bf:AdminMetadata>
          </bf:adminMetadata>
          <bf:hasInstance rdf:resource="http://example.org/d33e2#Instance"/>
        </bf:Work>
        <bf:Instance xmlns:bf="http://id.loc.gov/ontologies/bibframe/" rdf:about="http://example.org/d33e2#Instance">
          <bf:instanceOf rdf:resource="http://example.org/d33e2#Work"/>
        </bf:Instance>
      </rdf:RDF>
    </x:expect>
  </x:scenario>

  <x:scenario label="003 - CONTROL NUMBER IDENTIFIER">
    <x:context href="data/ConvSpec-001-007/marc.xml"/>
    <x:expect label="003 should set the assigner for the Local identifier" test="//bf:Work[1]/bf:adminMetadata/bf:AdminMetadata/bf:identifiedBy/bf:Local/bf:assigner/bf:Agent/bf:code = 'DE-101'"/>
    <x:expect label="... but inject URI if 003 value is DLC" test="//bf:Work[2]/bf:adminMetadata/bf:AdminMetadata/bf:identifiedBy/bf:Local/bf:assigner/bf:Agent/@rdf:about = 'http://id.loc.gov/vocabulary/organizations/dlc'"/>
    <x:expect label="... or inject URI if 003 value is empty string" test="//bf:Work[3]/bf:adminMetadata/bf:AdminMetadata/bf:identifiedBy/bf:Local/bf:assigner/bf:Agent/@rdf:about = 'http://id.loc.gov/vocabulary/organizations/dlc'"/>
    <x:expect label="... or inject URI if there is no 003" test="//bf:Work[4]/bf:adminMetadata/bf:AdminMetadata/bf:identifiedBy/bf:Local/bf:assigner/bf:Agent/@rdf:about = 'http://id.loc.gov/vocabulary/organizations/dlc'"/>
    <x:expect label="...and set the code for DLC" test="//bf:Work[4]/bf:adminMetadata/bf:AdminMetadata/bf:identifiedBy/bf:Local/bf:assigner/bf:Agent/bf:code = 'DLC'"/>
  </x:scenario>
</x:description>
