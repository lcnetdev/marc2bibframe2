<?xml version="1.0" encoding="UTF-8"?>

<x:description xmlns:x="http://www.jenitennison.com/xslt/xspec"
               xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
               xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
               xmlns:marc="http://www.loc.gov/MARC21/slim"
               xmlns:bf="http://id.loc.gov/ontologies/bibframe/"
               xmlns:bflc="http://id.loc.gov/ontologies/bibframe/lc-extensions/"
               stylesheet="../xsl/marc2bibframe2.xsl" xslt-version="1.0">

  <x:scenario label="210 - ABBREVIATED TITLE">
    <x:scenario label="multiple 210s">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc210.xml"/>
      <x:expect label="should make multiple Titles" test="//bf:Title[@rdf:about='http://example.org/1title210-2'] and //bf:Title[@rdf:about='http://example.org/1title210-3']"/>
      <x:expect label="should create title properties in Instance" test="count(//bf:Instance[1]/bf:title) = 2"/>
    </x:scenario>
    <x:scenario label="@ind1 != 1">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc210.xml"/>
      <x:expect label="should not create a Title entity" test="not(//bf:Title[@rdf:about='http://example.org/2title210-2'])"/>
      <x:expect label="should create a blank node title property in Instance" test="count(/rdf:RDF/bf:Instance[2]/bf:title/bf:Title) = 1"/>
    </x:scenario>
    <x:scenario label="@ind2 = ' '">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc210.xml"/>
      <x:expect label="creates an issnkey source" test="//bf:Instance[2]/bf:title/bf:Title/bf:source/bf:Source/rdf:value = 'issnkey'"/>
    </x:scenario>
    <x:scenario label="rdfs:label for Title">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc210.xml"/>
      <x:expect label="$a $b in record order" test="//bf:Instance[2]/bf:title/bf:Title/rdfs:label = 'Idler (Lond.)'"/>
    </x:scenario>
    <x:scenario label="$a">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc210.xml"/>
      <x:expect label="becomes the mainTitle" test="//bf:Instance[2]/bf:title/bf:Title/bf:mainTitle = 'Idler'"/>
    </x:scenario>
    <x:scenario label="$b">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc210.xml"/>
      <x:expect label="becomes the qualifier" test="//bf:Instance[2]/bf:title/bf:Title/bf:qualifier = '(Lond.)'"/>
    </x:scenario>
    <x:scenario label="$2">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc210.xml"/>
      <x:expect label="becomes the source" test="//bf:Title[@rdf:about='http://example.org/1title210-2']/bf:source/bf:Source/rdfs:label = 'DNLM'"/>
    </x:scenario>
  </x:scenario>

  <x:scenario label="222 - KEY TITLE">
    <x:scenario label="multiple 222s">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc222.xml"/>
      <x:expect label="should make multiple Titles" test="//bf:Title[@rdf:about='http://example.org/1title222-2'] and //bf:Title[@rdf:about='http://example.org/1title222-3']"/>
      <x:expect label="should create title properties in Instance" test="//bf:Instance[1]/bf:title[@rdf:resource='http://example.org/1title222-2'] and //bf:Instance[1]/bf:title[@rdf:resource='http://example.org/1title222-3']"/>
    </x:scenario>
    <x:scenario label="@ind2">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc222.xml"/>
      <x:expect label="should create the appropriate titleSortKey" test="//bf:Title[@rdf:about='http://example.org/1title222-3']/bflc:titleSortKey = 'Vagrant (London)'"/>
    </x:scenario>
    <x:scenario label="rdfs:label for Title">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc222.xml"/>
      <x:expect label="$a $b in record order" test="//bf:Title[@rdf:about='http://example.org/1title222-2']/rdfs:label = 'Idler (London)'"/>
    </x:scenario>
    <x:scenario label="$a">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc222.xml"/>
      <x:expect label="becomes the mainTitle" test="//bf:Title[@rdf:about='http://example.org/1title222-2']/bf:mainTitle = 'Idler'"/>
    </x:scenario>
    <x:scenario label="$b">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc222.xml"/>
      <x:expect label="becomes the qualifier" test="//bf:Title[@rdf:about='http://example.org/1title222-2']/bf:qualifier = '(London)'"/>
    </x:scenario>
  </x:scenario>

  <x:scenario label="242 - TRANSLATION OF TITLE BY CATALOGING AGENCY">
    <x:scenario label="multiple 242s">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc242.xml"/>
      <x:expect label="should make multiple Titles" test="//bf:Instance[1]/bf:title[1]/bf:Title and //bf:Title[@rdf:about='http://example.org/1title242-3']"/>
      <x:expect label="should create title properties in Instance" test="count(//bf:Instance[1]/bf:title) = 2"/>
    </x:scenario>
    <x:scenario label="@ind1 != 1">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc242.xml"/>
      <x:expect label="should not create a Title entity" test="count(/rdf:RDF/bf:Title[@rdf:about='http://example.org/1title242-2']) = 0"/>
      <x:expect label="should create a title property in Instance" test="count(//bf:Instance[1]/bf:title[1]/bf:Title) = 1"/>
      <x:expect label="and it should be a blank node" test="not(/rdf:RDF/bf:Instance[1]/bf:title[1]/@rdf:resource)"/>
    </x:scenario>
    <x:scenario label="@ind2">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc242.xml"/>
      <x:expect label="should create the appropriate titleSortKey" test="//bf:Instance[1]/bf:title/bf:Title/bflc:titleSortKey = 'Bureau'"/>
    </x:scenario>
    <x:scenario label="rdfs:label for Title">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc242.xml"/>
      <x:expect label="$abchnp in record order" test="//bf:Instance[2]/bf:title/bf:Title/rdfs:label = 'Annual report of the Minister of Supply and Service Canada under the Corporations and Labour Unions Returns Act. Part II, Labour unions = Rapport annuel du ministre des Approvisionnements et services Canada présenté sous l''empire et des syndicates ouvriers. Partie II, Syndicats ouvriers.'"/>
    </x:scenario>
    <x:scenario label="$a">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc242.xml"/>
      <x:expect label="becomes the mainTitle" test="//bf:Instance[1]/bf:title/bf:Title/bf:mainTitle = 'Le Bureau'"/>
    </x:scenario>
    <x:scenario label="$b">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc242.xml"/>
      <x:expect label="becomes the subtitle" test="//bf:Instance[2]/bf:title/bf:Title/bf:subtitle = 'Rapport annuel du ministre des Approvisionnements et services Canada présenté sous l''empire et des syndicates ouvriers.'"/>
    </x:scenario>
    <x:scenario label="$n">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc242.xml"/>
      <x:expect label="becomes a partNumber" test="//bf:Instance[2]/bf:title/bf:Title/bf:partNumber[2] = 'Partie II,'"/>
    </x:scenario>
    <x:scenario label="$p">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc242.xml"/>
      <x:expect label="becomes a partName" test="//bf:Instance[2]/bf:title/bf:Title/bf:partName[2] = 'Syndicats ouvriers.'"/>
    </x:scenario>
    <x:scenario label="$y">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc242.xml"/>
      <x:expect label="becomes the language" test="//bf:Instance[1]/bf:title[1]/bf:Title/bf:language/bf:Language/@rdf:resource = 'http://id.loc.gov/vocabulary/languages/fre'"/>
    </x:scenario>
  </x:scenario>
  
  <x:scenario label="243 - COLLECTIVE UNIFORM TITLE">
    <x:scenario label="@ind2">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc243.xml"/>
      <x:expect label="should create the appropriate titleSortKey" test="//bf:Work[1]/bf:title/bf:Title/bflc:titleSortKey = 'Compleat works of William Shakespeare, Abridged. Selections'"/>
    </x:scenario>
    <x:scenario label="rdfs:label for Title">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc243.xml"/>
      <x:expect label="$adfgklmnoprs in record order" test="//bf:Work[1]/bf:title/bf:Title/rdfs:label = 'The Compleat works of William Shakespeare, Abridged. Selections'"/>
    </x:scenario>
    <x:scenario label="$a">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc243.xml"/>
      <x:expect label="becomes the mainTitle" test="//bf:Work[1]/bf:title/bf:Title/bf:mainTitle = 'The Compleat works of William Shakespeare,'"/>
    </x:scenario>
  </x:scenario>

  <x:scenario label="245 - TITLE STATEMENT">
    <x:scenario label="@ind1 != 1">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc245.xml"/>
      <x:expect label="should not create a Title entity" test="count(/rdf:RDF/bf:Title[@rdf:about='http://example.org/1title245']) = 0"/>
      <x:expect label="should not create a title property in Work" test="count(/rdf:RDF/bf:Work[1]/bf:title) = 0"/>
      <x:expect label="should create a title property in Instance" test="count(/rdf:RDF/bf:Instance[1]/bf:title) = 1"/>
      <x:expect label="and it should be a blank node" test="not(/rdf:RDF/bf:Instance[1]/bf:title/@rdf:resource)"/>
    </x:scenario>
    <x:scenario label="@ind2">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc245.xml"/>
      <x:expect label="should create the appropriate titleSortKey" test="//bf:Instance[1]/bf:title/bf:Title/bflc:titleSortKey = 'Bureau La Oficina = Das Büro.'"/>
    </x:scenario>
    <x:scenario label="rdfs:label for Title">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc245.xml"/>
      <x:expect label="$abfgknps in record order" test="//bf:Instance[2]/bf:title/bf:Title/rdfs:label = 'Annual report of the Minister of Supply and Service Canada under the Corporations and Labour Unions Returns Act. Part II, Labour unions = Rapport annuel du ministre des Approvisionnements et services Canada présenté sous l''empire et des syndicates ouvriers. Partie II, Syndicats ouvriers.'"/>
    </x:scenario>
    <x:scenario label="$a">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc245.xml"/>
      <x:expect label="becomes the mainTitle" test="//bf:Instance[1]/bf:title/bf:Title/bf:mainTitle = 'Le Bureau'"/>
    </x:scenario>
    <x:scenario label="$b">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc245.xml"/>
      <x:expect label="becomes the subtitle" test="//bf:Instance[2]/bf:title/bf:Title/bf:subtitle = 'Rapport annuel du ministre des Approvisionnements et services Canada présenté sous l''empire et des syndicates ouvriers.'"/>
    </x:scenario>
    <x:scenario label="$c">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc245.xml"/>
      <x:expect label="becomes the Instance responsibility statement" test="//bf:Instance[3]/bf:responsibilityStatement = 'Alan Bird.'"/>
    </x:scenario>
    <x:scenario label="$f">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc245.xml"/>
      <x:expect label="becomes a Work originDate" test="//bf:Work[4]/bf:originDate = '1760-1878.'"/>
    </x:scenario>
    <x:scenario label="$g">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc245.xml"/>
      <x:expect label="becomes a Work originDate" test="//bf:Work[5]/bf:originDate = 'Jan.-Dec. 1985.'"/>
    </x:scenario>
    <x:scenario label="$h">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc245.xml"/>
      <x:expect label="creates a GenreForm entity in a genreForm property" test="//bf:Work[6]/bf:genreForm/bf:GenreForm/rdfs:label = '[sound recording].'"/>
    </x:scenario>
    <x:scenario label="$n">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc245.xml"/>
      <x:expect label="becomes a partNumber" test="//bf:Instance[2]/bf:title/bf:Title/bf:partNumber[2] = 'Partie II,'"/>
    </x:scenario>
    <x:scenario label="$p">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc245.xml"/>
      <x:expect label="becomes a partName" test="//bf:Instance[2]/bf:title/bf:Title/bf:partName[2] = 'Syndicats ouvriers.'"/>
    </x:scenario>
    <x:scenario label="$s">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc245.xml"/>
      <x:expect label="becomes a Work version" test="//bf:Work[4]/bf:version = 'Member release.'"/>
    </x:scenario>
  </x:scenario>

  <x:scenario label="246 - VARYING FORM OF TITLE">
    <x:scenario label="multiple 246s">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc246.xml"/>
      <x:expect label="should make multiple Titles" test="count(//bf:Title[contains(@rdf:about,'1title246')]) = 2"/>
      <x:expect label="should create title properties in Instance" test="count(//bf:Instance[1]/bf:title[contains(@rdf:resource,'title246')]) = 2"/>
    </x:scenario>
    <x:scenario label="@ind1 = 0 or @ind1 = 2">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc246.xml"/>
      <x:expect label="should not create a Title entity" test="count(//bf:Title[contains(@rdf:about,'2title246')]) = 0"/>
      <x:expect label="should create a blank node title property in Instance" test="count(//bf:Instance[2]/bf:title[2]/bf:Title) = 1"/>
    </x:scenario>
    <x:scenario label="@ind2 = 1">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc246.xml"/>
      <x:expect label="should create a ParallelTitle" test="count(//bf:Title[contains(@rdf:about,'1title246')]/rdf:type[text()='bf:ParallelTitle']) = 2"/>
    </x:scenario>
    <x:scenario label="other @ind2 value">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc246.xml"/>
      <x:expect label="should become the variantType" test="//bf:Title[contains(@rdf:about,'3title246')]/bf:variantType = 'portion'"/>
    </x:scenario>
    <x:scenario label="rdfs:label for Title">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc246.xml"/>
      <x:expect label="$abgnp in record order" test="//bf:Title[contains(@rdf:about,'4title246')]/rdfs:label = 'Archives for meteorology, geophysics, and bioclimatology : an engrossing read. Serie A, Meteorology and geophysics'"/>
    </x:scenario>
    <x:scenario label="$a">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc246.xml"/>
      <x:expect label="becomes the mainTitle" test="//bf:Title[1]/bf:mainTitle = 'Moderne Probleme der Pharmakopsychiatrie'"/>
    </x:scenario>
    <x:scenario label="$b">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc246.xml"/>
      <x:expect label="becomes the subtitle" test="//bf:Instance[2]/bf:title[2]/bf:Title/bf:subtitle = 'an engrossing read'"/>
    </x:scenario>
    <x:scenario label="$f">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc246.xml"/>
      <x:expect label="becomes the date" test="//bf:Title[contains(@rdf:about,'3title246')]/bf:date = 'Juli 1976-'"/>
    </x:scenario>
    <x:scenario label="$n">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc246.xml"/>
      <x:expect label="becomes a partNumber" test="//bf:Title[contains(@rdf:about,'4title246')]/bf:partNumber = 'Serie A,'"/>
    </x:scenario>
    <x:scenario label="$p">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc246.xml"/>
      <x:expect label="becomes a partName" test="//bf:Title[contains(@rdf:about,'4title246')]/bf:partName = 'Meteorology and geophysics'"/>
    </x:scenario>
    <x:scenario label="$5">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc246.xml"/>
      <x:expect label="becomes the applicableInstitution" test="//bf:Title[contains(@rdf:about,'4title246')]/bflc:applicableInstitution/bf:Agent/bf:code = 'DLC'"/>
    </x:scenario>
  </x:scenario>

  <x:scenario label="247 - FORMER TITLE">
    <x:scenario label="multiple 247s">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc247.xml"/>
      <x:expect label="should make multiple Titles" test="//bf:Title[contains(@rdf:about,'1title247-')] and //bf:Instance[1]/bf:title[3]/bf:Title"/>
      <x:expect label="should create title properties in Instance" test="count(//bf:Instance[1]/bf:title) = 4"/>
    </x:scenario>
    <x:scenario label="@ind1 = 0">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc247.xml"/>
      <x:expect label="should not create a Title entity" test="count(//bf:Title[contains(@rdf:about,'1title247-4')]) = 0"/>
      <x:expect label="should create a blank node title property in Instance" test="count(//bf:Instance[1]/bf:title[3]/bf:Title) = 1"/>
    </x:scenario>
    <x:scenario label="rdfs:label for Title">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc247.xml"/>
      <x:expect label="$abgnp in record order" test="//bf:Instance[1]/bf:title[4]/bf:Title/rdfs:label = 'Archives for meteorology, geophysics, and bioclimatology. Serie A, Meteorology and geophysics (varies slightly)'"/>
    </x:scenario>
    <x:scenario label="$a">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc247.xml"/>
      <x:expect label="becomes the mainTitle" test="//bf:Title[@rdf:about='http://example.org/1title247-3']/bf:mainTitle = 'Everywoman''s magazine'"/>
    </x:scenario>
    <x:scenario label="$b">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc247.xml"/>
      <x:expect label="becomes the subtitle" test="//bf:Instance[1]/bf:title[3]/bf:Title/bf:subtitle = 'orders, suborders, and great groups : National Soil Survey Classification of 1967.'"/>
    </x:scenario>
    <x:scenario label="$f">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc247.xml"/>
      <x:expect label="becomes the date" test="//bf:Title[@rdf:about='http://example.org/1title247-3']/bf:date = 'v. 1-24, Jan. 1948-57.'"/>
    </x:scenario>
    <x:scenario label="$g">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc247.xml"/>
      <x:expect label="becomes a qualifier" test="//bf:Instance[1]/bf:title[4]/bf:Title/bf:qualifier = '(varies slightly)'"/>
    </x:scenario>
    <x:scenario label="$n">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc247.xml"/>
      <x:expect label="becomes a partNumber" test="//bf:Instance[1]/bf:title[4]/bf:Title/bf:partNumber = 'Serie A,'"/>
    </x:scenario>
    <x:scenario label="$p">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc247.xml"/>
      <x:expect label="becomes a partName" test="//bf:Instance[1]/bf:title[4]/bf:Title/bf:partName = 'Meteorology and geophysics'"/>
    </x:scenario>
    <x:scenario label="$x">
      <x:context href="data/ConvSpec-200-247not240-Titles/marc247.xml"/>
      <x:expect label="becomes the identifiedBy Issn" test="//bf:Instance[1]/bf:title[4]/bf:Title/bf:identifiedBy/bf:Issn/rdf:value = '1234-5678'"/>
    </x:scenario>
  </x:scenario>

</x:description>
